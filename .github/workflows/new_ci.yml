name: Pipeline

on:
  pull_request:
    branches:
      - master
  push:
    branches:
      - test_task
  workflow_dispatch:
    inputs:
      registry:
        description: 'Registry'
        default: 'ghcr.io'
        required: true
        type: string
      server_address:
        description: 'Server address'
        default: 'smtp.gmail.com'
        required: true
        type: string

jobs:
  ci:
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: ${{ github.workspace }}/angular

    steps:
      - name: checkout
        uses: actions/checkout@v4

      - name: start timer
        run: |
          echo "START_TIME=$(date +%s)" >> $GITHUB_ENV
          echo The registry is ${{ github.event.inputs.registry }}
          echo The server_address is ${{ github.event.inputs.server_address }}